Version 4
SHEET 1 2048 1572
WIRE -144 -128 -176 -128
WIRE 48 -128 -48 -128
WIRE 224 -128 192 -128
WIRE 336 -128 320 -128
WIRE 1040 64 960 64
WIRE 1264 64 1040 64
WIRE -176 80 -176 -128
WIRE -176 80 -288 80
WIRE -144 80 -176 80
WIRE 48 80 48 -128
WIRE 48 80 -48 80
WIRE 112 80 48 80
WIRE 192 80 192 -128
WIRE 192 80 112 80
WIRE 224 80 192 80
WIRE 336 80 336 -128
WIRE 336 80 320 80
WIRE 400 80 336 80
WIRE 528 80 400 80
WIRE 1040 80 1040 64
WIRE 192 96 192 80
WIRE 48 112 48 80
WIRE -288 128 -288 80
WIRE 528 128 528 80
WIRE 1264 128 1264 64
WIRE 192 176 192 160
WIRE 272 176 272 160
WIRE 272 176 192 176
WIRE 1040 176 1040 160
WIRE 1200 176 1040 176
WIRE 272 208 272 176
WIRE -96 224 -96 160
WIRE 48 224 48 176
WIRE 48 224 -96 224
WIRE 272 240 272 208
WIRE -96 256 -96 224
WIRE 1040 256 1040 176
WIRE 1072 256 1040 256
WIRE 1168 256 1136 256
WIRE 1264 256 1264 224
WIRE 1264 256 1248 256
WIRE 1376 256 1264 256
WIRE 1040 272 1040 256
WIRE 880 320 832 320
WIRE 976 320 960 320
WIRE 1312 352 1216 352
WIRE 1392 352 1312 352
WIRE 1504 352 1392 352
WIRE 1392 400 1392 352
WIRE -288 432 -288 208
WIRE -96 432 -96 336
WIRE -96 432 -288 432
WIRE 448 432 448 192
WIRE 448 432 -96 432
WIRE 528 432 528 208
WIRE 528 432 448 432
WIRE 1040 432 1040 368
WIRE -288 464 -288 432
WIRE 1136 480 1088 480
WIRE 1216 480 1216 432
WIRE 1088 496 1088 480
WIRE 832 512 624 512
WIRE 1312 528 1312 352
WIRE 624 544 624 512
WIRE 832 544 800 544
WIRE 1216 544 1216 480
WIRE 1280 544 1216 544
WIRE 1392 560 1392 480
WIRE 1392 560 1344 560
WIRE 1424 560 1392 560
WIRE 1696 560 1424 560
WIRE 224 576 64 576
WIRE 288 576 224 576
WIRE 1104 576 1024 576
WIRE 1184 576 1168 576
WIRE 1248 576 1184 576
WIRE 1280 576 1248 576
WIRE 1840 576 1808 576
WIRE 1696 592 1568 592
WIRE 832 608 800 608
WIRE 1024 608 1024 576
WIRE 1248 608 1248 576
WIRE 224 624 224 576
WIRE -480 640 -480 624
WIRE 192 640 160 640
WIRE 832 640 800 640
WIRE 1104 640 1024 640
WIRE 288 656 256 656
WIRE 400 656 288 656
WIRE 1104 656 1104 640
WIRE 1184 656 1184 576
WIRE 1184 656 1168 656
WIRE -480 672 -480 640
WIRE -352 672 -352 624
WIRE -160 672 -176 672
WIRE -64 672 -80 672
WIRE 144 672 16 672
WIRE 192 672 144 672
WIRE 832 672 800 672
WIRE 1088 672 1024 672
WIRE -80 688 -80 672
WIRE 144 688 144 672
WIRE 832 704 800 704
WIRE 1056 704 1024 704
WIRE 1312 704 1312 592
WIRE 1248 720 1248 688
WIRE 1088 736 1088 672
WIRE 1104 736 1088 736
WIRE 1184 736 1184 656
WIRE 1184 736 1168 736
WIRE -80 784 -80 752
WIRE 32 784 32 768
WIRE 32 784 -80 784
WIRE 144 784 144 768
WIRE 144 784 32 784
WIRE 224 784 224 688
WIRE 224 784 144 784
WIRE 1056 816 1056 704
WIRE 1104 816 1056 816
WIRE 1184 816 1184 736
WIRE 1184 816 1168 816
WIRE -480 832 -480 752
WIRE -352 832 -352 752
WIRE -352 832 -480 832
WIRE 224 832 224 784
WIRE -480 864 -480 832
WIRE 224 928 128 928
WIRE 288 928 224 928
WIRE 704 928 704 880
WIRE 800 928 704 928
WIRE 864 928 800 928
WIRE 928 928 864 928
WIRE 800 944 800 928
WIRE 704 960 704 928
WIRE 928 960 928 928
WIRE 224 976 224 928
WIRE -192 992 -208 992
WIRE 16 992 -112 992
WIRE 192 992 16 992
WIRE 16 1008 16 992
WIRE 288 1008 256 1008
WIRE 400 1008 288 1008
WIRE 192 1024 160 1024
WIRE 864 1024 864 928
WIRE 672 1040 608 1040
WIRE 800 1040 800 1024
WIRE 800 1040 736 1040
WIRE 832 1040 800 1040
WIRE 928 1056 928 1040
WIRE 928 1056 896 1056
WIRE 1568 1056 1568 592
WIRE 1568 1056 928 1056
WIRE 704 1072 704 1040
WIRE 832 1072 704 1072
WIRE 560 1088 496 1088
WIRE 608 1088 608 1040
WIRE 704 1088 704 1072
WIRE 800 1088 800 1040
WIRE 560 1104 560 1088
WIRE -96 1136 -96 1088
WIRE 16 1136 16 1088
WIRE 16 1136 -96 1136
WIRE 224 1136 224 1040
WIRE 224 1136 16 1136
WIRE 352 1136 224 1136
WIRE 224 1168 224 1136
WIRE 352 1168 352 1136
WIRE 496 1168 352 1168
WIRE 560 1168 560 1152
WIRE 560 1168 496 1168
WIRE 608 1216 608 1168
WIRE 704 1216 704 1168
WIRE 704 1216 608 1216
WIRE 800 1216 800 1152
WIRE 800 1216 704 1216
WIRE 864 1216 864 1088
WIRE 864 1216 800 1216
WIRE 864 1264 864 1216
FLAG -288 464 0
FLAG 400 80 out
FLAG 272 208 gate
FLAG -288 80 Vin
FLAG 112 80 Vpos
FLAG -480 864 0
FLAG -480 640 1_2ref
FLAG 160 640 1_2ref
FLAG -176 672 Vpos
FLAG 400 656 UVLO
FLAG 160 1024 1_2ref
FLAG -208 992 Vpos
FLAG 400 1008 OVLO
FLAG -352 624 5V
FLAG 128 928 5V
FLAG 224 1168 0
FLAG 1040 432 0
FLAG 960 64 Vpos
FLAG 1376 256 gate
FLAG 224 832 0
FLAG 64 576 5V
FLAG 800 608 UVLO
FLAG 800 640 OVLO
FLAG 624 544 0
FLAG 704 880 5V
FLAG 864 1264 0
FLAG 800 672 UVLO
FLAG 800 704 OVLO
FLAG 272 -208 gate
FLAG -96 224 reverse_gate
FLAG -96 -208 reverse_gate
FLAG 1312 704 0
FLAG 1088 496 0
FLAG 1504 352 5V
FLAG 1424 560 gate_control
FLAG 1840 576 latch_ctrl
FLAG 800 544 latch_ctrl
FLAG 1248 720 5V
FLAG 832 320 latch_ctrl
SYMBOL voltage -288 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 30 102 Right 2
SYMATTR Value PULSE(5 18 0 1u 1u 200m 500m 2)
SYMATTR InstName V1
SYMBOL res 512 112 R0
WINDOW 3 49 75 VRight 2
SYMATTR Value 9
SYMATTR InstName R_load
SYMBOL zener 208 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value EDZV18B
SYMBOL cap 432 128 R0
SYMATTR InstName C1
SYMATTR Value 100µF
SYMBOL res -112 240 R0
SYMATTR InstName R1
SYMATTR Value 50
SYMBOL zener 64 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value EDZV18B
SYMBOL voltage -480 656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName 1_2ref
SYMATTR Value 1.2
SYMBOL voltage -352 656 R0
SYMATTR InstName 5V
SYMATTR Value 5V
SYMBOL ZZZ\\Comparator\\lm393 224 656 R0
SYMATTR InstName U3
SYMBOL res 32 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 160 784 R180
WINDOW 0 -35 67 Left 2
WINDOW 3 -34 31 Left 2
SYMATTR InstName R4
SYMATTR Value 2k5
SYMBOL zener -64 752 R180
WINDOW 0 41 8 Left 2
WINDOW 3 -87 -58 Left 2
SYMATTR InstName D4
SYMATTR Value BZX84C13VLY
SYMBOL res 272 560 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -64 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 50
SYMBOL cap 16 704 R0
SYMATTR InstName C2
SYMATTR Value 0.1µF
SYMBOL ZZZ\\Comparator\\lm393 224 1008 R0
SYMATTR InstName U4
SYMBOL res -96 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 27k
SYMBOL res 32 1104 R180
WINDOW 0 -35 67 Left 2
WINDOW 3 -34 31 Left 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 272 912 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL cap -112 1024 R0
SYMATTR InstName C3
SYMATTR Value 1µF
SYMBOL npn 976 272 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res 976 336 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_gate2
SYMATTR Value 1k
SYMBOL res 1024 64 R0
SYMATTR InstName R2
SYMATTR Value 3k3
SYMBOL npn 1200 128 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL schottky 1136 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL ZZZ\\MOS\\IRF\\PMOSFET\\irf4905 -96 80 M270
WINDOW 0 82 37 VLeft 2
WINDOW 3 49 36 VLeft 2
SYMATTR InstName U1
SYMBOL ZZZ\\MOS\\IRF\\PMOSFET\\irf4905 272 80 R270
WINDOW 0 84 -41 VRight 2
WINDOW 3 48 -38 VRight 2
SYMATTR InstName U2
SYMBOL res 1264 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL ZZZ\\LOGIC\\74HC\\74hc373 928 448 R0
SYMATTR InstName U6
SYMBOL ZZZ\\Comparator\\lm393 864 1056 R0
SYMATTR InstName U8
SYMBOL res 688 944 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 688 1072 R0
SYMATTR InstName R13
SYMATTR Value 2k2
SYMBOL cap 784 1088 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL res 784 928 R0
SYMATTR InstName R14
SYMATTR Value 3k3
SYMBOL res 912 944 R0
SYMATTR InstName R15
SYMATTR Value 3k
SYMBOL ZZZ\\MOS\\IRF\\PMOSFET\\irf4905 272 -128 M90
WINDOW 0 84 -41 VRight 2
WINDOW 3 48 -38 VRight 2
SYMATTR InstName U9
SYMBOL ZZZ\\MOS\\IRF\\PMOSFET\\irf4905 -96 -128 R90
WINDOW 0 82 37 VLeft 2
WINDOW 3 49 36 VLeft 2
SYMATTR InstName U10
SYMBOL ZZZ\\Comparator\\lm393 1312 560 R0
SYMATTR InstName U11
SYMBOL res 1232 592 R0
SYMATTR InstName R19
SYMATTR Value 10k
SYMBOL res 1200 336 R0
SYMATTR InstName R20
SYMATTR Value 1k
SYMBOL res 1232 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 2k2
SYMBOL ZZZ\\LOGIC\\74HC\\74hc32 1744 512 R0
SYMATTR InstName U7
SYMBOL diode 1168 560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMBOL diode 1168 640 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMBOL diode 1168 720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMBOL diode 1168 800 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMBOL res 1376 384 R0
SYMATTR InstName R10
SYMATTR Value 3k
SYMBOL sw 608 1184 M180
SYMATTR InstName S1
SYMATTR Value SW_1
SYMBOL voltage 496 1072 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 146 165 Right 2
SYMATTR Value PULSE(0 5 500m 1u 1u 10m 0 1)
SYMATTR InstName V2
SYMBOL jumper2 704 976 R0
SYMATTR InstName V3
TEXT -624 56 Left 2 !.tran 0 800m 0 startup
TEXT -192 -448 Left 2 !.param V_in=30
TEXT -192 -416 Left 2 !.param R_L = (V_in^2)/100
TEXT 504 1296 Left 2 !.Model SW_1 SW(Ron=10m Roff=100Meg Vt=3)
