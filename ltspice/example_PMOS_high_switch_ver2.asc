Version 4
SHEET 1 1940 1572
WIRE -144 80 -288 80
WIRE 48 80 -48 80
WIRE 112 80 48 80
WIRE 240 80 112 80
WIRE 272 80 240 80
WIRE 432 80 368 80
WIRE 512 80 432 80
WIRE 1040 80 1040 64
WIRE 1264 80 1040 80
WIRE 240 96 240 80
WIRE 48 112 48 80
WIRE 1040 112 1040 80
WIRE -288 128 -288 80
WIRE 432 128 432 80
WIRE 512 128 512 80
WIRE 1264 160 1264 80
WIRE 240 176 240 160
WIRE 320 176 320 160
WIRE 320 176 240 176
WIRE 320 208 320 176
WIRE 1040 208 1040 192
WIRE 1200 208 1040 208
WIRE -96 224 -96 160
WIRE 48 224 48 176
WIRE 48 224 -96 224
WIRE 320 240 320 208
WIRE -96 256 -96 224
WIRE 1040 288 1040 208
WIRE 1072 288 1040 288
WIRE 1168 288 1136 288
WIRE 1264 288 1264 256
WIRE 1264 288 1248 288
WIRE 1376 288 1264 288
WIRE 1488 288 1456 288
WIRE 1040 304 1040 288
WIRE 880 352 832 352
WIRE 976 352 960 352
WIRE -288 432 -288 208
WIRE -96 432 -96 336
WIRE -96 432 -288 432
WIRE 432 432 432 192
WIRE 432 432 -96 432
WIRE 512 432 512 208
WIRE 512 432 432 432
WIRE -288 464 -288 432
WIRE 1040 496 1040 400
WIRE 224 576 64 576
WIRE 288 576 224 576
WIRE 224 624 224 576
WIRE -480 640 -480 624
WIRE 192 640 160 640
WIRE 288 656 256 656
WIRE 400 656 288 656
WIRE -480 672 -480 640
WIRE -352 672 -352 624
WIRE -160 672 -176 672
WIRE -64 672 -80 672
WIRE 144 672 16 672
WIRE 192 672 144 672
WIRE -80 688 -80 672
WIRE 144 688 144 672
WIRE 816 688 816 640
WIRE 896 688 816 688
WIRE 1296 688 1296 656
WIRE 1392 688 1296 688
WIRE 1296 736 1296 688
WIRE -80 784 -80 752
WIRE 32 784 32 768
WIRE 32 784 -80 784
WIRE 144 784 144 768
WIRE 144 784 32 784
WIRE 224 784 224 688
WIRE 224 784 144 784
WIRE 800 784 752 784
WIRE 896 784 800 784
WIRE 1104 784 1088 784
WIRE 1200 784 1184 784
WIRE 1232 784 1200 784
WIRE -480 832 -480 752
WIRE -352 832 -352 752
WIRE -352 832 -480 832
WIRE 224 832 224 784
WIRE 1200 832 1200 784
WIRE -480 864 -480 832
WIRE 224 928 128 928
WIRE 288 928 224 928
WIRE 1200 944 1200 896
WIRE 1296 944 1296 832
WIRE 1296 944 1200 944
WIRE 224 976 224 928
WIRE -192 992 -208 992
WIRE 16 992 -112 992
WIRE 192 992 16 992
WIRE 16 1008 16 992
WIRE 288 1008 256 1008
WIRE 400 1008 288 1008
WIRE 1296 1008 1296 944
WIRE 192 1024 160 1024
WIRE -96 1136 -96 1088
WIRE 16 1136 16 1088
WIRE 16 1136 -96 1136
WIRE 224 1136 224 1040
WIRE 224 1136 16 1136
WIRE 224 1168 224 1136
FLAG -288 464 0
FLAG 432 80 out
FLAG 320 208 gate
FLAG -288 80 Vin
FLAG 112 80 Vpos
FLAG -480 864 0
FLAG -480 640 1_2ref
FLAG 160 640 1_2ref
FLAG -176 672 Vpos
FLAG 400 656 UVLO
FLAG 160 1024 1_2ref
FLAG -208 992 Vpos
FLAG 400 1008 OVLO
FLAG -352 624 5V
FLAG 128 928 5V
FLAG 224 1168 0
FLAG 1040 496 0
FLAG 832 352 gate_control
FLAG 1040 64 Vpos
FLAG 1488 288 gate
FLAG 224 832 0
FLAG 64 576 5V
FLAG 640 768 UVLO
FLAG 640 800 OVLO
FLAG 800 784 gate_control
FLAG 816 640 0
FLAG 1296 576 5V
FLAG 1296 1008 0
FLAG 1392 688 latch_ctrl
FLAG 896 720 latch_ctrl
SYMBOL voltage -288 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 30 102 Right 2
SYMATTR Value PULSE(5 33 0 1u 1u 100m 105m)
SYMATTR InstName V1
SYMBOL res 496 112 R0
WINDOW 3 49 75 VRight 2
SYMATTR Value R=limit(0.36, V(vin)**2/100, 1k)
SYMATTR InstName R_load
SYMBOL zener 256 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value EDZV18B
SYMBOL cap 416 128 R0
SYMATTR InstName C1
SYMATTR Value 100µF
SYMBOL res -112 240 R0
SYMATTR InstName R1
SYMATTR Value 50
SYMBOL zener 64 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value EDZV18B
SYMBOL voltage -480 656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName 1_2ref
SYMATTR Value 1.2
SYMBOL voltage -352 656 R0
SYMATTR InstName 5V
SYMATTR Value 5V
SYMBOL ZZZ\\Comparator\\lm393 224 656 R0
SYMATTR InstName U3
SYMBOL res 32 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 160 784 R180
WINDOW 0 -35 67 Left 2
WINDOW 3 -34 31 Left 2
SYMATTR InstName R4
SYMATTR Value 2k5
SYMBOL zener -64 752 R180
WINDOW 0 41 8 Left 2
WINDOW 3 -87 -58 Left 2
SYMATTR InstName D4
SYMATTR Value BZX84C13VLY
SYMBOL res 272 560 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -64 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 50
SYMBOL cap 16 704 R0
SYMATTR InstName C2
SYMATTR Value 0.1µF
SYMBOL ZZZ\\Comparator\\lm393 224 1008 R0
SYMATTR InstName U4
SYMBOL res -96 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 27k
SYMBOL res 32 1104 R180
WINDOW 0 -35 67 Left 2
WINDOW 3 -34 31 Left 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 272 912 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL cap -112 1024 R0
SYMATTR InstName C3
SYMATTR Value 1µF
SYMBOL npn 976 304 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res 976 368 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_gate2
SYMATTR Value 1k
SYMBOL res 1024 96 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL npn 1200 160 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL schottky 1136 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL ZZZ\\MOS\\IRF\\PMOSFET\\irf4905 -96 80 M270
WINDOW 0 82 37 VLeft 2
WINDOW 3 49 36 VLeft 2
SYMATTR InstName U1
SYMBOL ZZZ\\MOS\\IRF\\PMOSFET\\irf4905 320 80 R270
WINDOW 0 84 -41 VRight 2
WINDOW 3 48 -38 VRight 2
SYMATTR InstName U2
SYMBOL res 1360 272 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1m
SYMBOL res 1264 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 235k
SYMBOL ZZZ\\LOGIC\\74HC\\74hc373 992 624 R0
SYMATTR InstName U6
SYMBOL ZZZ\\LOGIC\\74HC\\74hc08 688 720 R0
SYMATTR InstName U5
SYMBOL npn 1232 736 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 1200 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 2k
SYMBOL res 1280 560 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL cap 1184 832 R0
SYMATTR InstName C4
SYMATTR Value 10µ
TEXT -288 -112 Left 2 !.tran 0 120m 0 startup
